{% load static %}
<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" href='{% static "img/herramientas.png" %}' type="image/x-icon">
    <link rel="stylesheet" href='{% static "css/style.css" %}'>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Ferremas</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px; /* Espacio alrededor del contenedor del encabezado */
        }
        .header-left {
            display: flex;
            align-items: center;
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px; /* Espacio entre el carrito y el selector de moneda */
        }
        .btn-cart {
            margin: 2px; /* Espacio alrededor del botón del carrito */
        }
    </style>
</head>
<body>
    <div class="container-fluid bg-success">
        <div class="row d-flex align-items-center justify-content-center">
            <div class="col-12 header-container">
                <div class="header-left">
                    <h1 class="text-white">FERRETERIA FERREMAS</h1>
                </div>
                <div class="col-7 header-right">
                    <a class="btn btn-outline-light btn-cart">
                        <div class="row">
                            <div class="col-9 d-flex align-items-center justify-content-center">
                                <h4>Carrito</h4>
                            </div>
                            <div class="col-3 d-flex align-items-center justify-content-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                                    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                                </svg>
                            </div>
                        </div>
                    </a>
                    <form id="currency-form" class="form-control" method="post" style="margin-bottom: 15px;">
                        {% csrf_token %}
                        <div class="row d-flex align-items-center justify-content-center"> 
                            <div class="col-6 d-flex align-items-center justify-content-center">
                                <select id="moneda" class="form-select" name="moneda" required>
                                    <option selected value="0">Seleccione una opción</option>
                                    <option value="1">CLP</option>
                                    <option value="2">USD</option>
                                    <option value="3">EUR</option>
                                </select>
                            </div>
                            <div class="col-6 d-flex align-items-center justify-content-center">
                                <input type="submit" class="btn btn-outline-success" value="Cambiar Moneda"></input>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" id="products-container">
            {% include 'core/productos.html' %}
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function(){
            $('#currency-form').on('submit', function(event){
                event.preventDefault();
                $.ajax({
                    url: '{% url "index" %}',  // URL del view que maneja la solicitud AJAX
                    type: 'POST',
                    data: {
                        'moneda': $('#moneda').val(),
                        'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                    },
                    success: function(response){
                        $('#products-container').html(response.html);
                    },
                    error: function(xhr, status, error){
                        console.error('Error en la solicitud AJAX:', error);
                    }
                });
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>